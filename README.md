# voters
Текущая версия: 0.2

Запуск проекта:
К сожалению, пока нет времени сделать честный config, поэтому план запуска:
1. Создайте базу данных: CREATE DATABASE AVITO_INTERN; и подключитесь к ней.
2. Создайте необходимые таблицы:
  CREATE TABLE polls
(
	id_poll serial,
	name_poll varchar(100) primary key
);

CREATE TABLE counter
(
	id_poll integer,
	id_choice smallint,
	name_choice varchar(200),
	voters integer,
	primary key(id_poll, id_choice)
);
3. Поправьте данные для подключения в файле "storage.go" – строка 43. Не забудьте сохранить изменения.
4. Запустите "go build" в папке проекта.
6. Запустите файл "voting".

План работ:
1. Установка и настройка PostgreSQL. Создание базы данных с необходимыми таблицами.
2. Создание main файла с описанием запросов.
3. Создание pre-storage файла с описанием используемых структур.
4. Создание файла для взаимодействия с базой данных (возможно объединение с предыдущим пунктом).
5. Создание файла с описанием хендлеров.

Опционально:
6. Тестирование.
7. Упаковка в docker-файл.

Имлементируемые методы:
POST /api/createPoll/ создать голосование c вариантами ответов
PUT /api/poll/ проголосовать за конкретный вариант: <poll_id, choice_id>
GET /api/getResult/ получить результат по конкретному голосованию: <poll_id>

Создадим базу данных, со следующими таблицами:
POLLS (ID_POLLS, NAME_POLLS)
COUNTER(ID_POLLS, ID_CHOICE, NAME_CHOICE, VOTERS)

Для генерации ID_POLLS будем использовать автоинкремент. Для генерации ID_CHOICE будем использовать порядок в JSON при POST.

Основные используемые структуры:
Poll – для создания голосования. Поля: название голосования, список вариантов.
VotingSheet – для голосования. Поля: ID голосования, ID варианта.
Field – для ключа в Report. Поля: ID варианта, название варианта.
Report – для формирования ответа на GET запрос. Поле – map, где ключ - Field, значение – количество голосов.
